<Window x:Class="WhackerLinkConsoleV2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WhackerLinkConsoleV2" Height="600" Width="1000" Background="#FFF2F2F2">
    <Window.Resources>
        <!-- Modern App Bar Menu -->
        <Style TargetType="Menu">
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Height" Value="40"/>
            <!-- Taller app bar -->
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Menu">
                        <Border Background="{TemplateBinding Background}">
                            <ItemsPresenter HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    SnapsToDevicePixels="True"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Modern MenuItem -->
        <Style TargetType="MenuItem">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="12,0"/>
            <!-- base padding -->

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="MenuItem">
                        <Grid>
                            <!-- Visual for the item -->
                            <Border x:Name="Border"
                            Background="{TemplateBinding Background}">
                                <ContentPresenter x:Name="ContentSite"
                                          ContentSource="Header"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Left"
                                          RecognizesAccessKey="True"/>
                            </Border>

                            <!-- Popup (submenu) -->
                            <Popup x:Name="PART_Popup"
                           Placement="Bottom"
                           IsOpen="{TemplateBinding IsSubmenuOpen}"
                           AllowsTransparency="True"
                           Focusable="False"
                           PopupAnimation="Fade">
                                <Border Background="#2C2C2C"
                                CornerRadius="6"
                                Padding="4"
                                SnapsToDevicePixels="True">
                                    <StackPanel IsItemsHost="True"/>
                                </Border>
                            </Popup>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <!-- Top-level menu headers (File/Edit...) -->
                            <Trigger Property="Role" Value="TopLevelHeader">
                                <Setter TargetName="Border" Property="Padding" Value="16,0"/>
                                <!-- more space -->
                                <Setter TargetName="PART_Popup" Property="Placement" Value="Bottom"/>
                                <Setter Property="Height" Value="25"/>
                                <!-- full app bar height -->
                            </Trigger>

                            <!-- Submenus (File → New...) -->
                            <Trigger Property="Role" Value="SubmenuHeader">
                                <Setter TargetName="PART_Popup" Property="Placement" Value="Right"/>
                                <Setter TargetName="Border" Property="Padding" Value="12,6"/>
                            </Trigger>
                            <Trigger Property="Role" Value="SubmenuItem">
                                <Setter TargetName="Border" Property="Padding" Value="12,6"/>
                            </Trigger>

                            <!-- Hover -->
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#3A86FF"/>
                                <Setter TargetName="ContentSite" Property="TextElement.Foreground" Value="White"/>
                            </Trigger>

                            <!-- Open submenu -->
                            <Trigger SourceName="PART_Popup" Property="IsOpen" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#3A86FF"/>
                                <Setter TargetName="ContentSite" Property="TextElement.Foreground" Value="White"/>
                            </Trigger>

                            <!-- Disabled -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="ContentSite" Property="TextElement.Foreground" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TabItem Style -->
        <Style TargetType="TabItem">
            <Setter Property="Foreground" Value="LightGray"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Margin" Value="4,0,4,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Border"
                        Background="Transparent"
                        Padding="{TemplateBinding Padding}"
                        Cursor="Hand">
                            <ContentPresenter x:Name="ContentSite"
                                      ContentSource="Header"
                                      VerticalAlignment="Center"
                                      HorizontalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ContentSite" Property="TextElement.Foreground" Value="#3A86FF"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="ContentSite" Property="TextElement.Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="ContentSite" Property="TextElement.Foreground" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TabControl Style with sliding underline -->
        <Style TargetType="TabControl">
            <Setter Property="Background" Value="#2C2C2C"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabControl">
                        <DockPanel>
                            <!-- Tab Headers -->
                            <Grid DockPanel.Dock="Top" Height="40" Background="#242424">
                                <!-- TabPanel must be directly in template -->
                                <TabPanel x:Name="HeaderPanel"
                                  IsItemsHost="True"
                                  Background="Transparent"
                                  VerticalAlignment="Bottom"
                                  HorizontalAlignment="Stretch"
                                />

                                <!-- Animated underline -->
                                <Border x:Name="SelectionIndicator"
                                Height="3"
                                Width="0"
                                Background="#3A86FF"
                                VerticalAlignment="Bottom"
                                HorizontalAlignment="Left"
                                RenderTransformOrigin="0,0">
                                    <Border.RenderTransform>
                                        <TranslateTransform x:Name="IndicatorTransform"/>
                                    </Border.RenderTransform>
                                </Border>
                            </Grid>

                            <!-- Tab Content -->
                            <Border Background="{TemplateBinding Background}"
                            CornerRadius="6"
                            SnapsToDevicePixels="True"
                            Margin="0,2,0,0">
                                <ContentPresenter x:Name="PART_SelectedContentHost"
                                          ContentSource="SelectedContent"
                                          Margin="4"/>
                            </Border>
                        </DockPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>


    <Grid Background="#212121">
        <!-- Column Definitions -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="191*"/>
            <ColumnDefinition Width="803*"/>
            <ColumnDefinition Width="6*"/>
        </Grid.ColumnDefinitions>

        <!-- Row Definitions -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="52"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top Menu Background -->
        <Border BorderBrush="#000" BorderThickness="1" Grid.Row="1" Grid.ColumnSpan="3">
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#1E1E1E"/>
                    <GradientStop Color="#242424" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

        <!-- Menu -->
        <Menu VerticalAlignment="Center" Height="25" Background="#000" Grid.ColumnSpan="3">
            <MenuItem Header="File" Height="25" Foreground="#FFF" Background="#000">
                <MenuItem Header="Open Codeplug" Click="OpenCodeplug_Click" Foreground="#FFF"/>
                <!-- <MenuItem Header="Open Debug Console" Click="OpenDebugConsole_Click" /> -->
            </MenuItem>
            <MenuItem Header="Edit" Foreground="#FFF" Background="#000">
                <MenuItem Header="Audio Settings" Click="AudioSettings_Click" Foreground="#FFF"/>
                <MenuItem Header="Enable Edit Mode" Click="ToggleEditMode_Click" Foreground="#FFF"/>
                <MenuItem Header="Select Widgets to Display" Click="SelectWidgets_Click" Foreground="#FFF"/>
                <MenuItem Header="Reset Settings" Click="ResetSettings_Click" Foreground="#FFF"/>
                <MenuItem Header="Alerts" Foreground="#FFF" Background="#000">
                    <MenuItem Header="Add Alert Tone" Click="AddAlertTone_Click" Foreground="#FFF"/>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="Page" Foreground="#FFF" Background="#000">
                <MenuItem Header="P25 Page" Click="P25Page_Click" Foreground="#FFF"/>
                <MenuItem Header="Manual QC2" Click="ManualPage_Click" Foreground="#FFF"/>
            </MenuItem>
        </Menu>

        <!-- Zones Tabs -->
        <TabControl x:Name="ChannelsTabControl"
                    Background="#242424"
                    Grid.Row="2"
                    Grid.ColumnSpan="3"
                    Panel.ZIndex="1">
            <!-- Default Tab containing ChannelsCanvas -->
            <TabItem Header="Systems" Height="37" Width="100">
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <Canvas x:Name="ChannelsCanvas" Background="Transparent"/>
                </ScrollViewer>
            </TabItem>

            
        </TabControl>

        <!-- Logo -->
        <Image HorizontalAlignment="Left" Height="50" Grid.Row="1" VerticalAlignment="Center" Width="231" Source="/Assets/WhackerLinkLogoV4.png" Stretch="UniformToFill" Margin="5,0,0,0" Grid.ColumnSpan="2">
            <Image.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform AngleY="-0.164"/>
                    <RotateTransform/>
                    <TranslateTransform Y="-0.247"/>
                </TransformGroup>
            </Image.RenderTransform>
        </Image>

        <!-- Buttons -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="47,0,0,0" Grid.Row="1" Grid.Column="1">
            <StackPanel.Resources>
                <Style TargetType="Button">
                    <Setter Property="Height" Value="46"/>
                    <Setter Property="Width" Value="45"/>
                    <Setter Property="FontSize" Value="10"/>
                    <Setter Property="FontFamily" Value="Arial"/>
                    <Setter Property="BorderBrush" Value="#2c2c2c"/>
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                <GradientStop Color="#FFF0F0F0" Offset="0.485"/>
                                <GradientStop Color="#FFDBDBDB" Offset="0.517"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Style>
            </StackPanel.Resources>
            <Button x:Name="OpenCodeplug_Click2" Click="OpenCodeplug_Click" Background="#888888" >
                <Image Source="pack://application:,,,/WhackerLinkConsoleV2;component/Assets/config2.png" Width="36" Height="40"/>
            </Button>

            <Button x:Name="btnGlobalPtt" Click="btnGlobalPtt_Click" Width="75" Background="#888888" >
                <Image HorizontalAlignment="Left" Grid.Row="1" Width="41" Source="/Assets/instantptt.png" OpacityMask="Black"/>
            </Button>

            <Button x:Name="btnAlert1" Click="btnAlert1_Click" Background="#888888" >
                <Image HorizontalAlignment="Left" Grid.Row="1" Width="41" Source="/Assets/alerttone2.png" OpacityMask="Black"/>
            </Button>

            <Button x:Name="btnAlert2" Click="btnAlert2_Click" Background="#888888" >
                <Image HorizontalAlignment="Left" Grid.Row="1" Width="41" Source="/Assets/alerttone2.png" OpacityMask="Black"/>
            </Button>

            <Button x:Name="btnAlert3" Click="btnAlert3_Click" Background="#888888" >
                <Image HorizontalAlignment="Left" Grid.Row="1" Width="41" Source="/Assets/alerttone2.png" OpacityMask="Black"/>
            </Button>

            <Button Click="P25Page_Click" Background="#888888" >
                <Image HorizontalAlignment="Left" Grid.Row="1" Width="41" Source="/Assets/page.png" OpacityMask="Black"/>
            </Button>

            <Button Click="AudioSettings_Click" Background="#888888" >
                <Image HorizontalAlignment="Left" Grid.Row="1" Width="41" Source="/Assets/audio.png" OpacityMask="Black"/>
            </Button>

            <Button Click="ClearEmergency_Click" Background="#888888" >
                <Image HorizontalAlignment="Left" Grid.Row="1" Width="41" Source="/Assets/clearemerg.png" OpacityMask="Black"/>
            </Button>


            <Button Content="Select All" Click="SelectAll_Click" Background="#888888"/>
            <Button Content="Key Stats" Click="KeyStatus_Click" Background="#888888"/>
            <Button Content="Call Hist" Click="CallHist_Click" Background="#888888"/>
        </StackPanel>
    </Grid>
</Window>
